<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Mail Sender - Painel Administrativo</title>
    <link rel="stylesheet" href="/styles.css">
</head>
<body>
    <div class="container">
        <header>
            <h1>üìß Mail Sender</h1>
            <p class="subtitle">Painel Administrativo</p>
        </header>

        <nav class="tabs">
            <button class="tab-button active" data-tab="dashboard">
                üìä Dashboard
            </button>
            <button class="tab-button" data-tab="keys">
                üîë API Keys
            </button>
            <button class="tab-button" data-tab="test">
                ‚úâÔ∏è Testar Email
            </button>
            <button class="tab-button" data-tab="logs">
                üìú Logs Recentes
            </button>
        </nav>

        <!-- Dashboard Tab -->
        <div class="tab-content active" id="dashboard">
            <div class="stats-grid">
                <div class="stat-card">
                    <div class="stat-icon">üì®</div>
                    <div class="stat-info">
                        <h3 id="totalEmails">-</h3>
                        <p>Total de Emails</p>
                    </div>
                </div>
                <div class="stat-card">
                    <div class="stat-icon">‚úÖ</div>
                    <div class="stat-info">
                        <h3 id="successEmails">-</h3>
                        <p>Emails Enviados</p>
                    </div>
                </div>
                <div class="stat-card">
                    <div class="stat-icon">‚ùå</div>
                    <div class="stat-info">
                        <h3 id="failedEmails">-</h3>
                        <p>Emails Falhados</p>
                    </div>
                </div>
                <div class="stat-card">
                    <div class="stat-icon">üîå</div>
                    <div class="stat-info">
                        <h3 id="totalRequests">-</h3>
                        <p>Total de Requisi√ß√µes</p>
                    </div>
                </div>
            </div>

            <div class="section">
                <h2>üìà Emails Recentes</h2>
                <div class="table-container">
                    <table id="recentEmailsTable">
                        <thead>
                            <tr>
                                <th>Data</th>
                                <th>Para</th>
                                <th>Assunto</th>
                                <th>Template</th>
                                <th>Status</th>
                            </tr>
                        </thead>
                        <tbody id="recentEmailsBody">
                            <tr>
                                <td colspan="5" class="loading">Carregando...</td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </div>
        </div>

        <!-- API Keys Tab -->
        <div class="tab-content" id="keys">
            <div class="section">
                <h2>üîë Gerenciar API Keys</h2>
                
                <div class="form-group">
                    <label for="keyName">Nome da Nova Chave:</label>
                    <div class="input-group">
                        <input type="text" id="keyName" placeholder="Ex: producao, desenvolvimento, teste">
                        <button class="btn btn-primary" onclick="generateApiKey()">
                            ‚ûï Gerar Chave
                        </button>
                    </div>
                </div>

                <div id="newKeyDisplay" class="alert alert-success" style="display: none;">
                    <h3>‚úÖ Chave Gerada com Sucesso!</h3>
                    <p><strong>ATEN√á√ÉO:</strong> Guarde esta chave em local seguro. Ela n√£o ser√° mostrada novamente!</p>
                    <div class="key-display">
                        <code id="generatedKey"></code>
                        <button class="btn-copy" onclick="copyToClipboard()">üìã Copiar</button>
                    </div>
                </div>

                <h3>Chaves Existentes</h3>
                <div class="table-container">
                    <table id="apiKeysTable">
                        <thead>
                            <tr>
                                <th>Nome</th>
                                <th>Prefixo</th>
                                <th>Criada em</th>
                                <th>A√ß√µes</th>
                            </tr>
                        </thead>
                        <tbody id="apiKeysBody">
                            <tr>
                                <td colspan="4" class="loading">Carregando...</td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </div>
        </div>

        <!-- Test Email Tab -->
        <div class="tab-content" id="test">
            <div class="section">
                <h2>‚úâÔ∏è Enviar Email de Teste</h2>
                
                <div class="form-group">
                    <label for="testApiKey">API Key:</label>
                    <input type="password" id="testApiKey" placeholder="Sua API Key">
                </div>

                <div class="form-group">
                    <label for="testTo">Para (email):</label>
                    <input type="email" id="testTo" placeholder="destinatario@exemplo.com">
                </div>

                <div class="form-group">
                    <label for="testSubject">Assunto:</label>
                    <input type="text" id="testSubject" placeholder="Assunto do email">
                </div>

                <div class="form-group">
                    <label for="testTemplate">Template:</label>
                    <select id="testTemplate" onchange="updateTemplateExample()">
                        <option value="bemvindo">Bem-vindo</option>
                        <option value="generico">Gen√©rico</option>
                    </select>
                </div>

                <div class="form-group">
                    <label for="testData">Dados do Template (JSON):</label>
                    <div id="templateInfo" class="alert alert-info" style="margin-bottom: 10px; display: block;">
                        <strong>üìù Campos do template "Bem-vindo":</strong>
                        <ul style="margin: 10px 0; padding-left: 20px; font-size: 0.9rem;">
                            <li><code>nomeSistema</code> (opcional) - Nome do seu sistema/empresa</li>
                            <li><code>nome</code> (opcional) - Nome do destinat√°rio</li>
                            <li><code>mensagem</code> (opcional) - Mensagem customizada</li>
                            <li><code>mostrarBotao</code> (true/false) - Exibir bot√£o de a√ß√£o</li>
                            <li><code>textoBotao</code> - Texto do bot√£o (se mostrarBotao=true)</li>
                            <li><code>urlBotao</code> - URL do bot√£o (se mostrarBotao=true)</li>
                            <li><code>corPrimaria</code> - Cor do header (ex: "#4F46E5")</li>
                            <li><code>logoUrl</code> - URL do logo (substitui nomeSistema)</li>
                        </ul>
                    </div>
                    <textarea id="testData" rows="10" placeholder='{"nome": "Jo√£o", "nomeSistema": "MinhaApp"}'>{
  "nomeSistema": "Vitrine",
  "nome": "Jo√£o Silva",
  "mensagem": "Estamos felizes em t√™-lo conosco! Explore todas as funcionalidades.",
  "mostrarBotao": true,
  "textoBotao": "Acessar Plataforma",
  "urlBotao": "https://exemplo.com/login"
}</textarea>
                </div>

                <button class="btn btn-primary btn-large" onclick="sendTestEmail()">
                    üöÄ Enviar Email de Teste
                </button>

                <div id="testResult" style="margin-top: 20px;"></div>
            </div>
        </div>

        <!-- Logs Tab -->
        <div class="tab-content" id="logs">
            <div class="section">
                <h2>üìú Atividade Recente</h2>
                <div class="table-container">
                    <table id="activityTable">
                        <thead>
                            <tr>
                                <th>Data/Hora</th>
                                <th>M√©todo</th>
                                <th>Endpoint</th>
                                <th>Status</th>
                                <th>Usu√°rio</th>
                            </tr>
                        </thead>
                        <tbody id="activityBody">
                            <tr>
                                <td colspan="5" class="loading">Carregando...</td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </div>
        </div>
    </div>

    <footer>
        <p>Mail Sender v1.0 - Sistema de Envio de Emails</p>
        <p>Desenvolvido por <a href="https://github.com/ruanlopes1350" target="_blank">Ruan Lopes</a></p>
    </footer>

    <script src="/script.js"></script>
</body>
</html>
